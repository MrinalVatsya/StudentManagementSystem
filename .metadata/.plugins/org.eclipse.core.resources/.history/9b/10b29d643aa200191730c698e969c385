/**
 * 
 */
package com.mind.poc.AmazonHiring;

import java.util.LinkedList;
import java.util.Scanner;

/**
 * @author mrinalvatsya
 *
 */
class VertexWeightPair
{
	int v;
	int w;
	public int getV() {
		return v;
	}
	public void setV(int v) {
		this.v = v;
	}
	public int getW() {
		return w;
	}
	public void setW(int w) {
		this.w = w;
	}
}
public class ChanduGraph {

	public static int MOD = 1000000009; 
	private LinkedList<VertexWeightPair> adj[]; 
	public static void printSolution(int dist[][]) 
	{ 
		System.out.println("The following matrix shows the maximum "+ 
				"distances between every pair of vertices"); 
		for (int i=0; i<dist.length; ++i) 
		{ 
			for (int j=0; j<dist[i].length; ++j) 
			{ 
				System.out.print(dist[i][j]+"   "); 
			} 
			System.out.println(); 
		} 
	} 
	public static void main(String[] args) {
		Scanner sc = new Scanner(System.in);
		int t = Integer.parseInt(sc.nextLine());
		while(t-- > 0)
		{
			int n =  Integer.parseInt(sc.nextLine());
			long graph[][] = new long[n][n];
			int x = n-1;
			while(x-- > 0)
			{
				String str = sc.nextLine();
				String[] strArray = str.split("\\s+");
				int u = Integer.parseInt(strArray[0])-1;
				int v = Integer.parseInt(strArray[1])-1;
				int w = Integer.parseInt(strArray[2]);
				graph[u][v] = w;
			}
			long dist[][] = new long[n][n];
			int ans = 0;
			for(int i = 0; i < n; i++)
				for(int j = 0; j < n; j++)
				{
					dist[i][j] = graph[i][j];
				}

			for(int i = 0; i < n; i++)
			{
				for(int j = 0; j < n; j++)
				{
					for(int k = 0; k < n; k++)
					{
						if(graph[i][j]==0 && j > i)
						{
							int temp = Math.max(dist[i][k], dist[k][j]);
							if(dist[i][j] < temp)
								dist[i][j] = temp;
						}
					}
				}
			}
			for(int i = 0; i < n; i++)
				for(int j = 0; j < n; j++)
					ans = ans + dist[i][j];

			ans = ans % MOD;
			System.out.println(ans);
			//printSolution(dist);

		}
	}

}
